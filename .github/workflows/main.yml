- name: Set up kubeconfig
  run: |
    echo "${{ secrets.KUBECONFIG }}" > kubeconfig.yaml
    export KUBECONFIG=$PWD/kubeconfig.yaml
    kubectl config view
    kubectl config get-contexts
    kubectl config current-context
    kubectl cluster-info
- name: Apply Kubernetes manifests
  run: |
    kubectl apply -f kubernetes/secret.yaml -f kubernetes/deployment.yaml -f kubernetes/service.yaml --validate=false
